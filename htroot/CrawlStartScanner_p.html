<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>YaCy '#[clientname]#': Network Scanner</title>
    #%env/templates/metas.template%#
    <script type="text/javascript">
    <!--
    function setall(name) {
        var selectForm = document.forms.namedItem(name);
        var count = selectForm.elements["num"].value;
        for (i = 0; i < count; i++) {
            if (selectForm.elements["item_" + i] == null) continue;
            selectForm.elements["item_" + i].checked = !selectForm.elements["item_" + i].checked;
        }
    }
    -->
    </script>
    <script type="text/javascript" src="/js/sorttable.js"></script>
  </head>
  <body id="IndexCreate">
    #%env/templates/header.template%#
    #%env/templates/submenuIndexCreate.template%#
    <h2>Network Scanner</h2>

    <p>
      YaCy can scan a network segment for available http, ftp and smb server.
      You must first select a IP range and then, after this range is scanned,
      it is possible to select servers that had been found for a full-site crawl.
    </p>
	
    #(noserverdetected)#::
    <p>
      No servers had been detected in the given IP range #[iprange]#. Please enter a different IP range for another scan.
    </p>
    #(/noserverdetected)#
    
    <form onSubmit="document.getElementById('scanhostinfo').innerHTML='Please wait...'; disableSubmit();" action="CrawlStartScanner_p.html" method="get">
    <fieldset>
      <legend>
	    <label>Scan the network</label>
	  </legend>
    <dl>
    <dt>Scan Range</dt>
    <dd>
        <input type="radio" name="source" id="source" value="hosts"#(intranet.checked)# checked="checked"::#(/intranet.checked)# />Scan sub-range with given host
        <input type="text" name="scanhosts" value="#[scanhosts]#" size="60" maxlength="400" /><br/><br/>
    
        <input type="radio" name="source" id="source" value="intranet"#(intranet.checked)#:: checked="checked"#(/intranet.checked)# />Full Intranet Scan: #[intranethosts]#<br/>
        #(intranetHint)#::<div class="info">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Do not use intranet scan results, you are not in an intranet environment!</div>#(/intranetHint)#
    </dd>
    <dt>Scan Cache</dt>
    <dd>
        <input type="checkbox" name="accumulatescancache" id="accumulatescancache" checked="checked">accumulate scan results with access type "granted" into scan cache (do not delete old scan result)
    </dd>
    <dt>Service Type</dt>
    <dd>
        <input type="checkbox" name="scanftp" checked="checked">ftp
        <input type="checkbox" name="scansmb" checked="checked">smb
        <input type="checkbox" name="scanhttp">http
        <input type="checkbox" name="scanhttps">https
    </dd>
    
    <dt>Scheduler</dt>
    <dd>
        <input type="radio" name="rescan" value="off" #(rescanCheck)#checked="checked"::#(/rescanCheck)#/>run only a scan<br/>
		<input type="radio" name="rescan" value="scheduler" onclick="document.getElementById('accumulatescancache').checked = false" #(rescanCheck)#::checked="checked"#(/rescanCheck)#/>
		scan and add all sites with granted access automatically. This disables the scan cache accumulation.
		<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Look every
		<select name="repeat_time">
           <option value="1">1</option><option value="2">2</option><option value="3">3</option>
           <option value="4">4</option><option value="5">5</option><option value="6">6</option>
           <option value="7">7</option><option value="8">8</option>
           <option value="9">9</option><option value="10" selected="selected">10</option>
           <option value="12">12</option><option value="14">14</option><option value="15">15</option>
           <option value="21">21</option><option value="28">28</option><option value="30">30</option>
		</select>
		<select name="repeat_unit">
           <option value="selminutes" selected="selected">minutes</option>
           <option value="selhours">hours</option>
           <option value="seldays">days</option>
        </select> again and add new sites automatically to indexer.<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sites that do not appear during a scheduled scan period will be excluded from search results.
    </dd>
    
    <dt>&nbsp;</dt>
    <dd><input type="submit" id="scan" name="scan" value="Scan" /><div class="info" id="scanhostinfo" style="text-decoration: blink;">&nbsp;</div></dd>
    </dl>
    </fieldset>
    </form>
    
	#(servertable)#::
	<p>
	  The following servers had been detected:
	</p>
	<form id="servertable" name="servertable" action="CrawlStartScanner_p.html" method="post" enctype="multipart/form-data" accept-charset="UTF-8" ><fieldset>
	  <legend><label for="servertable">Available server within the given IP range</label></legend>
      <table class="sortable" border="0" cellpadding="2" cellspacing="1">
        <tr class="TableHeader" valign="bottom">
          <td><input type="checkbox" name="allswitch" onclick="setall(this.form.name)" /></td>
          <td>Protocol</td>
          <td>IP</td>
          <td>URL</td>
          <td>Access</td>
          <td>Process</td>
        </tr>
        #{list}#
        <tr class="TableCellLight">
          <td align="left"><input type="checkbox" name="item_#[count]#" value="mark_#[pk]#" #(preselected)#::checked#(/preselected)#/></td>
          <td>#[protocol]#</td>
          <td><a href="#[url]#">#[ip]#</a></td>
          <td><a href="#[url]#">#[url]#</a></td>
          #(accessUnknown)#::<td class="info">unknown</td>#(/accessUnknown)#
          #(accessEmpty)#::<td class="info">empty</td>#(/accessEmpty)#
          #(accessGranted)#::<td class="commit">granted</td>#(/accessGranted)#
          #(accessDenied)#::<td class="error">denied</td>#(/accessDenied)#
          #(process)#<td class="info">not in index</td>::<td class="commit">indexed</td>#(/process)#
        </tr>
        #{/list}#
      </table>
      <p>
      <input type="hidden" name="num" value="#[num]#" />
      <input type="submit" name="crawl" value="Add Selected Servers to Crawler" />
      </p>
    </fieldset></form>
	#(/servertable)#
	

    #%env/templates/footer.template%#
  </body>
</html>

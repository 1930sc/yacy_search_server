<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link media="screen" type="text/css" href="css/ywidget.css" rel="stylesheet" />
<link media="screen" type="text/css" href="css/base.css" rel="stylesheet" />
<title>YaCy Widget</title>

<script src="js/jquery-1.2.6.min.js" type="text/javascript"></script>
<script src="js/jquery.jfeed.js" type="text/javascript""></script>
<script src="js/jquery.scrollTo-min.js" type="text/javascript""></script>
<script src="js/jquery.serialScroll-min.js" type="text/javascript""></script>
<script src="js/jquery.query.js" type="text/javascript""></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#settings').hide();
    $('#info').bind('click', function() {
    	$('.items').slideToggle('fast');
    });
    var url = $.query.get('rss');
    alert(url);
    if (url == '') {
    	url = '/yacysearch.rss';
    }
    $.query.REMOVE("rss");    
    jQuery.getFeed({
        url: url + $.query.toString(),        
        success: function(feed) {
            jQuery('#result').prepend('<div class="head">'            
            + '<a href="http://www.yacy.net">'
            + '<img src="img/yacy-logo.png" height="20" border="0" alt="YaCy"/>'
            + '</a>'
            + ' <a href="'
            + feed.link
            + '">'
            + feed.title
            + '</a>'            
            + '</div>');            
            var html = '';            
            for(var i = 0; i < feed.items.length; i++) {            
                var item = feed.items[i];                
                html += '<h4>'
                + '<a href="'
                + item.link
                + '">'
                + item.title
                + '</a>'
                + '</h4>';                
                html += '<p class="desc">'
                + item.description                               
                html += '</p><p class="date">'
                + item.updated
                + '</p>';
            }            
            jQuery('#items').append(html);        	
        }    
    });    
	$('#items').serialScroll({
		items:'h4',
		duration:900,
		cycle: true,		
		force: true,
		axis:'y',
		lazy:true,
		interval:2000, 
		step:1 
	});		
});
</script>

</head>
<body>
	<div id="result" class="ywidget">		
		<div id="items" class="items"></div>
		<div id="settings" class="items">
			<label for="rss">RSS Feed:</label>
			<br />
			<input class="input" name="rss" value="" type="text" size="16" maxlength="80" />
			<img src="img-2/question_blue.png" alt="help" title="help" />
			<br />
			<label for="query">Query:</label>
			<br />
			<input class="input" name="query" value="" type="text" size="16" maxlength="80" />
			<img src="img-2/question_blue.png" alt="help" title="help" />
			<br />
			<table>
				<tr>
					<td>
						<label for="interval">Scroll intervall:</label>
						<br />
						<input class="select" name="intervall" value="2000" type="text" size="8" maxlength="5" />						
					</td>
					<td>
						<label for="duration">Scroll duration:</label>
						<br />
						<input class="select" name="duration" value="900" type="text" size="8" maxlength="5" />									
					</td>
				</tr>				
				<tr>
					<td style="width:55%">
						<label for="cycle">Scroll cycle:</label>
						<br />
						<select class="select" id="cycle" name="cycle">
							<option value="true" selected="selected">on</option>
							<option value="false" >off</option>										
						</select>							
					</td>
					<td>
						<label for="step">Scroll step:</label>
						<br />
						<select class="select" id="step" name="step">
							<option value="1" selected="selected">1</option>
							<option value="2r" >2</option>
							<option value="3" >3</option>
							<option value="3" >4</option>										
						</select>												
					</td>
				</tr>
			</table>			
		</div>			
		<div id="nav" class="nav">
			<img src="img-2/info.png" id="info" class="clickable" alt="Info" />			
		</div>
	</div>	
</body>
</html>

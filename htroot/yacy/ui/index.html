<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>YaCy - Peer-to-Peer Search Network</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="Content-Language" content="English, Englisch" />
  
  <link media="screen" type="text/css" href="css/base.css" rel="stylesheet" />
  <link media="screen" type="text/css" href="css/ui.tabs.css" rel="stylesheet" />
  <link media="screen" type="text/css" href="css/jquery.tablesorter.pager.css" rel="stylesheet" />
  <link media="screen" type="text/css" href="css/jquery.pagination.css" rel="stylesheet" />
  <link media="screen" type="text/css" href="css/jquery.accordion.css" rel="stylesheet" />	
	
  <script src="js/jquery-1.2.6.min.js" type="text/javascript"></script>    
  <script src="js/jquery-ui.min.js" type="text/javascript"></script>
  
  <script src="js/jquery.tablesorter.min.js" type="text/javascript"></script>  
  <script src="js/jquery.tablesorter.pager.js" type="text/javascript"></script>
  
  <script src="js/jquery.dimensions.min.js" type="text/javascript"></script>  
  <script src="js/jquery.metadata.min.js" type="text/javascript"></script>
  
  <script src="js/jquery.form.js" type="text/javascript"></script>
  <script src="js/jquery.field.min.js" type="text/javascript"></script>
  
  <script src="js/jquery.pagination.js" type="text/javascript"></script>
  <script src="js/jquery-faviconize-1.0.js" type="text/javascript"></script>
  
  <script src="js/jqModal.js" type="text/javascript"></script>
  <script src="js/jqDnR.js" type="text/javascript"></script> 
  
  <script type="text/javascript">
   //<![CDATA[
	$(function() {		
		qtag = "";
		/* Initialize Tabs and set up close function */
		var $tabs = $('#container ul').tabs({
        	add: function(ui) {
            	var li = $(ui.tab).parents('li:eq(0)')[0];
                $('<img class="close" alt="close" src="/yacy/ui/img/cancel.png" border="0"/>')
					.appendTo(li)
                	.bind('click', function() {
						$tabs.tabs('remove', $('li', $tabs).index(li));						
					});
				/* save search options from form to tab attributes*/			
				var search = $("input[@name='search']").getValue();
				var contentdom = $("select[@name='contentdom']").getValue();
				var count = $("select[@name='itemsPerPage']").getValue();
				var offset = 0;
				var resource = $("select[@name='resource']").getValue();
				var constraint= $("select[@name='constraint']").getValue();
				var prefermaskfilter = $("input[@name='prefermaskfilter']").getValue();				
				var urlmaskfilter = $("input[@name='urlmaskfilter']").getValue();
				
				$('#' + ui.panel.id).attr('search', search);
				$('#' + ui.panel.id).attr('contentdom', contentdom);
				$('#' + ui.panel.id).attr('count', count);
	        	$('#' + ui.panel.id).attr('offset', offset);
				$('#' + ui.panel.id).attr('resource', resource);
				$('#' + ui.panel.id).attr('constraint', constraint);
	        	$('#' + ui.panel.id).attr('prefermaskfilter', prefermaskfilter);
				$('#' + ui.panel.id).attr('urlmaskfilter', urlmaskfilter);
            },
			select: function(ui) {             	
				/* set global variable tabid */
				tabid = '#' + ui.panel.id;				
				if (tabid == "#Bookmarks") {
					$("select[@name='resource']").setValue('ymarks');
					$("input[@name='search']").setValue(qtag);									
				} else {				
					/* set query string */				
					var search = $(tabid).attr('search');
					var contentdom = $(tabid).attr('contentdom');
					var count = $(tabid).attr('count');
					var offset = $(tabid).attr('offset');
					var resource = $(tabid).attr('resource');
					var constraint= $(tabid).attr('constraint');
					var prefermaskfilter = $(tabid).attr('prefermaskfilter');
					var urlmaskfilter = $(tabid).attr('urlmaskfilter');

					query = $(tabid).attr('resource')
						+"&search="+search
						+"&contentdom="+contentdom
						+"&count="+count
						+"&offset="+offset
						+"&constraint="+constraint
						+"&prefermaskfilter="+prefermaskfilter
						+"&urlmaskfilter="+urlmaskfilter;
					$("input[@name='search']").setValue(search);
					$("select[@name='itemsPerPage']").setValue(count);
					$("select[@name='contentdom']").setValue(contentdom);
					$("select[@name='constraint']").setValue(constraint);
					$("input[@name='prefermaskfilter']").setValue(prefermaskfilter);
					$("input[@name='urlmaskfilter']").setValue(urlmaskfilter);
					$('#yoptions').trigger('update');
				}
			}
		});
			 
		/* Load Sidebar */
		$("#side1").load("sidebar/sidebar_admin.html");	
		/* $("#side2").load("sidebar/sidebar_pager.html"); */
		$("#side3").load("sidebar/sidebar.html");
		
		/* Load Search Result into new Tab */
		$('#searchbox').submit(function() {			
			if ($("select[@name='resource']").getValue() == "ymarks") {								
				qtag = $("input[@name='search']").getValue();
				if (tabid == "#Bookmarks") {
					$tabs.tabs("load", 2);
				} else {
					$tabs.tabs('select',2);
				}						
			} else {			
				var tabnr = $('#container > ul').tabs('length');			
				var tabname = $("input[@name='search']").getValue();			
				$tabs.tabs('add', "ysearch.html", '*' + tabname);
				$tabs.tabs('select',tabnr);
			}
			return false;
		});
		
		$("#tagcloud").click(function () { 
			alert("tagcloud"); 
		});
		
		$("#searchtext").click(function () { 
			$("#side3").accordion("activate", 0); 
		});
	});
   //]]>	
  </script>  
</head>

<body>
	<div class="top">
		<div class="searchbox">			
			<div id="ysearch" class="boxed">
				<h3>YaCy Search</h3>
				<div class="content">
					<table style="text-align: left; width: 800px;" border="0" cellpadding="2" cellspacing="2" summary="">
					<tr>		
						<td style="height: 60px; text-align: left; width: 140px;">
							<img style="width: 120px; height: 60px;" alt="YaCy" title="YaCy" src="img/kaskelix.png"/> 
						</td>											
						<td style="text-align: left; vertical-align: middle; width: 660px;">							
							<form id="searchbox" method="get" accept-charset="UTF-8" action="">								
								<p>
								<input id="searchtext" name="search" type="text" size="50" maxlength="80" value=""/>
								<input  id="searchbutton" type="submit" name="Enter" value="Search" />
								<select name="contentdom" class="selectbox">
									<option selected="selected" value="text">text</option>
									<option value="image">image</option>
									<option value="audio">audio</option>
									<option value="video">video</option>
									<option value="app">application</option>
								</select>
								<select name="resource" class="selectbox">
									<option value="/yacysearch.rss?resource=global" selected="selected">freeworld</option>
									<option value="/yacysearch.rss?resource=local" >local peer</option>
									<option value="ymarks" >bookmarks</option>
									<option value="/xml/util/ynetSearch.xml?login=&url=http://sciencenet.fzk.de:8080/yacysearch.rss?resource=global" >sciencenet</option>
								</select>															
								</p>
							</form>
						</td>
					</tr>
					</table>
				</div>
			</div>
		</div>
		<div id="container" class="main">
			<ul>
				<!-- initial tabs only, dynamic tabs are loaded via jQuery -->
				<li><a href="welcome.html" title="Welcome"><span>Welcome</span></a></li>
				<li><a href="ranking.html" title="Ranking"><span>Ranking</span></a></li>
				<li><a href="ymarks.html" title="Bookmarks"><span>Bookmarks</span></a></li>			
			</ul>		
		</div>
	</div>	
	<div id="sidebar" class="sidebar">
		<div class="basic" id="side1"></div>
		<div class="boxed" id="side2"></div>
		<div class="basic" id="side3"></div>
	</div>
</body>
</html>



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>YaCy '#[clientname]#': Configuration of a phpBB3 Search</title>
    #%env/templates/metas.template%#
  </head>
  <body id="IndexCreate">
    #%env/templates/header.template%#
    #%env/templates/submenuIntegration.template%#
    <h2>Integration in phpBB3</h2>
    <p>
      It is possible to insert forum pages into the YaCy index using a databse import of forum postings.
      This guide helps you to insert a search window in your phpBB3 pages.
    </p>
    
    <h3>Retrieval of phpBB3 Forum Pages</h3>
    <p>
      Forum posting contain rich information about the topic, the time, the subject and the author.
      This information is in an bad annotated form in web pages delivered by the forum software.
      It is much better to retrieve the forum postings directly from the database. This will cause that YaCy is able to offer nice navigation features after searches.
      YaCy has a phpBB3 extraction feature, please go to the <a href="ContentIntegrationPHPBB3_p.html">phpBB3 content integration</a> servlet for direct database imports.
    </p>

    <h3>Inserting a Search Window to phpBB3</h3>
    <p>
      To integrate a search window into phpBB3, you must insert some code into the wiki template.
      There are several templates that can be used for MediaWiki, but in this guide we consider that
      you are using the default template, 'MonoBook.php':
      <ul>
        <li>open skins/MonoBook.php</li>
        <li>find the line where the default search window is displayed, there are the following statements:
         <pre>&lt;form name="searchform" action="&lt;?php $this-&gt;text('searchaction') ?&gt;" id="searchform"&gt;
              &lt;input id="searchInput" name="search" type="text"
                &lt;?php if($this-&gt;haveMsg('accesskey-search')) {
                  ?&gt;accesskey="&lt;?php $this-&gt;msg('accesskey-search') ?&gt;"&lt;?php }
                if( isset( $this-&gt;data['search'] ) ) {
                  ?&gt; value="&lt;?php $this-&gt;text('search') ?&gt;"&lt;?php } ?&gt; /&gt;
              &lt;input type='submit' name="go" class="searchButton" id="searchGoButton"
                value="&lt;?php $this-&gt;msg('go') ?&gt;"
                /&gt;&nbsp;&lt;input type='submit' name="fulltext"
                class="searchButton"
                value="&lt;?php $this-&gt;msg('search') ?&gt;" /&gt;
            &lt;/form&gt;
         </pre></li>
        <li>Remove that code or set it in comments using '&lt;!--' and '--&gt;' </li>
        <li>Insert the following code:
         <pre>
&lt;p&gt;Search with YaCy in this Forum:&lt;/p&gt;
&lt;script src="http://#[address]#/yacy/ui/js/jquery-1.3.1.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script&gt;
   $(document).ready(function() {
      yconf = {
         url : 'http://#[address]#/',
         theme : 'smoothness',
         title : 'YaCy Forum Search',
         urlmaskfilter : '.*',
         width : 500,
         height : 600
      };
      $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){});
   });
&lt;/script&gt;
&lt;div id="yacylivesearch"&gt;
   &lt;form id="ysearch" method="get" accept-charset="UTF-8" action="http://#[address]#/yacysearch.html"&gt;
      &lt;input name="search" id="yquery" type="text" size="15" maxlength="80" value=""/&gt;
      &lt;input type="hidden" name="verify" value="false" /&gt;
      &lt;input type="hidden" name="maximumRecords" value="10" /&gt;
      &lt;input type="hidden" name="resource" value="local" /&gt;
      &lt;input type="hidden" name="urlmaskfilter" value=".*" /&gt;
      &lt;input type="hidden" name="prefermaskfilter" value="" /&gt;
      &lt;input type="hidden" name="former" value="" /&gt;
      &lt;input type="hidden" name="display" value="2" /&gt;
      &lt;input type="submit" name="Enter" value="Suchen" /&gt;
   &lt;/form&gt;
&lt;/div&gt;
</pre></li>
        <li>Check all appearances of static IPs given in the code snippet and replace it with your own IP, or your host name</li>
        <li>You may want to change the default text elements in the code snippet</li>
        <li>To see all options for the search widget, look at the more generic description of search widgets at
            <a href=""></a>.
       </ul>
       </p>
    #%env/templates/footer.template%#
  </body>
</html>

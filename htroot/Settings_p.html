<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>YaCy '#[clientname]#': Settings</title>
#[metas]#
</head>
<body marginheight="0" marginwidth="0" leftmargin="0" topmargin="0">
#[header]#
<br><br>
<h2>Settings</h2>
<p>This is the configuration page for YaCy. Access to this page should be limited to an administration person only.
To restrict the access to this page, please set an administrator account and password <a href="#admin">below.</a></p>
<p>If you want to restore all settings to the default values,
but <b>forgot your administration password</b>, you must stop the proxy,
delete the file 'DATA/SETTINGS/httpProxy.conf' in the YaCy application root folder and start YaCy again.
<p>
<table>
<tr>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#admin">Administration Account Settings</a></td>
	<td rowspan="5" width="30">&nbsp;</td>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#ServerAccess">Server Access Settings</a></td>
</tr>
<tr>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#general">General Settings</a></td>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#SystemBehaviour">System Behaviour Settings</a></td>
</tr>
<tr>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#ProxyAccess">Server Access Settings</a></td>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#seed">Seed Upload Settings</a></td>
</tr>
<tr>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#http">HTTP Networking</a></td>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#messageForwarding">Message Forwarding (optional)</a></td>
</tr>
<tr>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#proxy">Remote Proxy (optional)</a></td>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#parser">Content Parser Settings</a></td>
</tr>
<tr>
	<td><img src="env/grafics/down.gif" alt="down"><a href="#portForwarding">Port Forwarding (optional)</a></td>
	<td>&nbsp;</td>
</tr>

</table>
</p>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="admin">Administration Account Settings</legend>
<p>This is the account that restricts access to this 'Settings' page. If you have not customized it yet, you should do so now:
<p><table border="0" cellspacing="5">
  <tr valign="top">
    <td>Account Name:</td><td><input name="adminuser" type="text" size="16" maxlength="16" value="#[adminuser]#"></td>
    <td valign="bottom" align="right" rowspan="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" name="adminaccount" value="submit"></td>
  </tr>
  <tr valign="top">
    <td>Password:</td>
    <td><input name="adminpw1" type="password" size="16" maxlength="16" value=""></td></tr>
  <tr valign="top">
    <td>Password (repeat same as above):</td>
    <td><input name="adminpw2" type="password" size="16" maxlength="16" value=""></td>
  </tr>
</table>
</fieldset>
</form><br>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="general">General Settings</legend>
<p>
<table border="0" cellspacing="5">
  <tr valign="top">
    <td>Peer&nbsp;Name:</td>
    <td><input name="peername" type="text" size="32" maxlength="80" value="#[peerName]#"></td>
    <td><b>Your peer name defines also a new '.yacy' - domain, which can be accessed from every peer running this proxy.</b>
           Using your 'Home Page' and 'File Share' - zones you also have a platform to provide content to your new domain.<br>
    <i>(hint: Choose a name that appears on a web page that tells something about you, visit the page, get the 'senior' status, and you can be found...)</i></td>
  </tr>
  <tr valign="top">
    <td>staticIP (optional):</td>
    <td><input name="staticIP" type="text" size="32" maxlength="80" value="#[staticIP]#"></td>
    <td><b>The staticIP can help that your peer can be reached by other peers in case that your
           peer is behind a firewall or proxy.</b> You can create a tunnel through the firewall/proxy
           (look out for 'tunneling through https proxy with connect command') and create
           an access point for incoming connections.
           This access address can be set here (either as IP number or domain name).
           If the address of outgoing connections is equal to the address of incoming connections,
           you don't need to set anything here, please leave it blank.<br>
  </tr>
  <tr>
    <td colspan="3"><input type="submit" name="generalsettings" value="submit"></td>
  </tr>
</table>
</fieldset>
</form><br>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="ProxyAccess">Server Access Settings</legend>
These settings configure the access method to your own http proxy and server.
All traffic is routed throug one single port, for both proxy and server.<br>
<br><b>Port Configuration</b><br><br>
<table border="0" cellspacing="5">
  <tr valign="top">
    <td>Proxy and http-Server Administration Port:</td>
    <td><input name="port" type="text" size="5" maxlength="5" value="#[port]#"></td>
    <td><i>Changes will take effect after restart only.</i></td>
  </tr> 
</table>

<p><b>Server Access Restrictions</b><br><br>You can restrict the access to this proxy/server using a two-stage security barrier:
<ul>
<li>define an <i>access domain</i> with a list of granted client IP-numbers or with wildcards</li>
<li>define an <i>user account</i> with an user:password - pair</li>
</ul><br>

<p>This is the account that restricts access to the proxy function. You probably don't want to share the proxy to the internet, so you should set the IP-Number Access Domain to a pattern that corresponds to you local intranet. The default setting should be right in most cases. If you want, you can also set a proxy account so that every proxy user must authenticate first, but this is rather unusual.</p>
<p><table border="0" cellspacing="5">
<tr valign="top"><td>IP-Number filter:</td><td colspan ="2"><input name="proxyfilter" type="text" size="50" maxlength="1000" value="#[proxyfilter]#"></td></tr>
<tr valign="top"><td>Account Name:</td><td><input name="proxyuser" type="text" size="16" maxlength="16" value="#[proxyuser]#"></td>
<td valign="bottom" align="right" rowspan="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" name="proxyaccount" value="Submit"></td></tr>
<tr valign="top"><td>Password:</td><td><input name="proxypw1" type="password" size="16" maxlength="16" value=""></td></tr>
<tr valign="top"><td>Password (repeat same as above):</td><td><input name="proxypw2" type="password" size="16" maxlength="16" value=""></td></tr>
</table>
</fieldset>
</form><br>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="http">HTTP Networking</legend>
<table border="0" cellspacing="5">
  <tr valign="top">
    <td>Transparent&nbsp;Proxy:</td>
    <td><input type="checkbox" name="isTransparentProxy" align="top" #(isTransparentProxy)#::checked#(/isTransparentProxy)#></td>
    <td>With this you can specify if YaCy can be used as transparent proxy.<br>
    <i>Hint: On linux you can configure your firewall to transparently redirect all http traffic through yacy using this iptables rule:</i><br>     
			    <small><code>iptables -t nat -A PREROUTING -p tcp -s 192.168.0.0/16 --dport 80 -j DNAT --to 192.168.0.1:#[port]#</code></small>
  </td>
  </tr>  
  <tr valign="top">
    <td>Connection&nbsp;Keep-Alive:</td>
    <td><input type="checkbox" name="connectionKeepAliveSupport" align="top" #(connectionKeepAliveSupport)#::checked#(/connectionKeepAliveSupport)#></td>
    <td>With this you can specify if YaCy should support the HTTP connection keep-alive feature.</td>
  </tr>  
  <tr valign="top">
    <td></td>
    <td colspan="2"><input type="submit" name="httpNetworking" value="submit">&nbsp;<i>Changes will take effect immediately.</i></td>
  </tr>  
</table>
</fieldset>
</form><br>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="proxy">Remote Proxy (optional)</legend>
<p>YaCy can use another proxy to connect to the internet. You can enter the address for the remote proxy here:</p>
<p><table border="0" cellspacing="5">
  <tr valign="top">
    <td>Remote proxy host:</td>
    <td><input name="remoteProxyHost" type="text" size="32" maxlength="128" value="#[remoteProxyHost]#"></td>
  </tr>
  <tr valign="top">
    <td>Remote proxy port:</td>
    <td><input name="remoteProxyPort" type="text" size="5" maxlength="5" value="#[remoteProxyPort]#"></td>
  </tr>
  <tr valign="top">
    <td>no-proxy adresses:</td>
    <td><input name="remoteProxyNoProxy" type="text" size="32" maxlength="128" value="#[remoteProxyNoProxy]#"></td>
  </tr>
  <tr valign="top">
    <td>Use remote proxy:</td>
    <td><input type="checkbox" name="remoteProxyUse" align="top" #(remoteProxyUseChecked)#::checked#(/remoteProxyUseChecked)#></td>
  </tr>
  <tr valign="top">
    <td></td>
    <td><input type="submit" name="proxysettings" value="submit">&nbsp;<i>Changes will take effect immediately.</i></td>
  </tr>
</table>
</fieldset>
</form><br>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="portForwarding">Port Forwarding (optional)</legend>
<p>You can use a remote server running a ssh demon to forward your server/proxy port.
This is useful if you want to tunnel throug a NAT/router.
Alternatively, you can simply set a virtual server port on your NAT/Server to enable connections from outside.</p>
<table border="0" cellspacing="5">
  <tr valign="top">
    <td>Enable&nbsp;port&nbsp;forwarding:</td>
    <td><input type="checkbox" name="portForwardingEnabled" align="top" #(portForwardingEnabled)#::checked#(/portForwardingEnabled)#></td>
    <td>Enabling disabling port forwarding via secure channel.</td>
  </tr>
  <tr valign="top">
    <td>Forwarding&nbsp;via&nbsp;proxy:</td>
    <td><input type="checkbox" name="portForwardingUseProxy" align="top" #(portForwardingUseProxy)#::checked#(/portForwardingUseProxy)# DISABLED></td>
    <td><!-- Specifies if the connection should be established through the <a href="#proxy">remote proxy</a>.-->
        <i>Function not available at the moment.</i></td>
  </tr>    
  <tr valign="top">
    <td>Forwarding&nbsp;port:</td>
    <td><input name="portForwardingPort" type="text" size="5" maxlength="5" value="#[portForwardingPort]#"></td>
    <td>The port on the remote server that should be forwarded via the secure channel to the local host.</td>
  </tr>  
  <tr valign="top">
    <td>Forwarding&nbsp;host:</td>
    <td><input name="portForwardingHost" type="text" size="32" maxlength="128" value="#[portForwardingHost]#"></td>
    <td>&nbsp;</td>
  </tr>
  <tr valign="top">
    <td>Forwarding&nbsp;host&nbsp;port:</td>
    <td><input name="portForwardingHostPort" type="text" size="5" maxlength="5" value="#[portForwardingHostPort]#"></td>
    <td>&nbsp;</td>
  </tr>
  <tr valign="top">
    <td>Forwarding&nbsp;host&nbsp;user:</td>
    <td><input name="portForwardingHostUser" type="text" size="32" maxlength="128" value="#[portForwardingHostUser]#"></td>
    <td>&nbsp;</td>
  </tr>
  <tr valign="top">
    <td>Forwarding&nbsp;host&nbsp;password:</td>
    <td><input name="portForwardingHostPwd" type="password" size="32" maxlength="128" value="#[portForwardingHostPwd]#"></td>
    <td>&nbsp;</td>
  </tr> 
  <tr valign="top"> 
    <td>&nbsp;</td>
	<td colspan="2"><input type="submit" name="portForwarding" value="Submit">&nbsp;<i>Changes will take effect immediately.</i></td>
  </tr>  
</table>
</fieldset>
</form><br>


<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="ServerAccess">Server Access Settings</legend>
<p>Here you can restrict access to the server. By default, the access is not limited, because this function is needed to spawn the p2p index-sharing function. If you block access to your server (setting anything else than '*'), then you will also be blocked from using other peers' indexes for search service. However, blocking access may be correct in enterprise environments where you only want to index your company's own web pages.</p>
<p>ATTENTION: Your current IP is recognized as "#[clientIP]#". If the value you enter here does not match with this IP, you will not be able to access the server pages anymore</p>
<p><table border="0" cellspacing="5">
<tr valign="top"><td>IP-Number filter:</td><td colspan ="2"><input name="serverfilter" type="text" size="50" maxlength="1000" value="#[serverfilter]#"></td></tr>
<tr valign="top"><td><!--Account Name:</td><td><input name="serveruser" type="text" size="16" maxlength="16" value="#[serveruser]#">--></td>
<td valign="bottom" align="right" rowspan="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" name="serveraccount" value="Submit"></td></tr>
<!--
<tr valign="top"><td>Password:</td><td><input name="serverpw1" type="password" size="16" maxlength="16" value=""></td></tr>
<tr valign="top"><td>Password (repeat same as above):</td><td><input name="serverpw2" type="password" size="16" maxlength="16" value=""></td></tr>
-->
</table>
</fieldset>
</form><br>

<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="SystemBehaviour">System Behaviour Settings</legend>
<table>
<tr><td>Auto pop-up of status page on start-up:</td>
<td><input type="submit" name="enpop" value="enable"> / <input type="submit" name="dispop" value="disable"></td></tr>
</table>
</fieldset>
</form><br>

<p>
<fieldset>
<legend id="seed">Seed Upload Settings</legend>
<p>With these settings you can configure if you have an account on a public accessible 
server where you can host a seed-list file.</p>
<p><b>General Settings:</b></p>
If you enable one of the available uploading methods, you will become a principal peer.
Your peer will then upload the seed-bootstrap information periodically,
but only if there had been changes to the seed-list.
</p>
<form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<table border="0" cellspacing="5">
  <tr valign="top">
    <td>Upload Method:</td>
    <td><select name="seedUploadMethod" size="1">
#{seedUploadMethods}#
		<option value="#[name]#" #(selected)#::selected#(/selected)#>#[name]#</option>
#{/seedUploadMethods}#
		</select>
		<input type="submit" name="seedUploadRetry" value="Retry Uploading"></td>
    <td><i>Here you can specify which upload method should be used. Select 'none' to deactivate uploading.</i></td>
  </tr>
  <tr valign="top">
    <td>URL:</td>
    <td><input name="seedURL" type="text" size="40" value="#[seedURL]#"></td>
    <td><i>The URL that can be used to retrieve the uploaded seed file, like
           http://www.&lt;my-host&gt;.net/yacy/seed.txt'</i></td>
  </tr>  
  <tr>
    <td colspan="3"><input type="submit" name="seedSettings" value="submit"></td>
  </tr>  
</table>
</form>

#{seedUploadMethods}#
#%[file]%#		
#{/seedUploadMethods}#
</fieldset>

<br>
<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="messageForwarding">Message Forwarding</legend>
<p>With this settings you can activate or deactivate forwarding of yacy-messages via email.
<p>
<table border="0" cellspacing="5">
  <tr valign="top">
    <td>Enable message forwarding:</td>
    <td><input type="checkbox" name="msgForwardingEnabled" align="top" #(msgForwardingEnabled)#::checked#(/msgForwardingEnabled)#></td>
    <td><i>Enabling/Disabling message forwarding via email.</td>
  </tr>
  <tr valign="top">
    <td>Forwarding Command:</td>
    <td><input name="msgForwardingCmd" type="text" size="32" value="#[msgForwardingCmd]#"></td>
    <td><i>The command-line program that should be used to forward the message.<br>e.g.:</i>&nbsp;<code>/usr/sbin/sendmail -t</code></td>
  </tr>
  <tr valign="top">
    <td>Forwarding To:</td>
    <td><input name="msgForwardingTo" type="text" size="32" maxlength="128" value="#[msgForwardingTo]#"></td>
    <td><i>The recipient email-address.<br> e.g.:</i>&nbsp;<code>root@localhost</code></td>
  </tr>
  <tr valign="top">
    <td></td>
    <td colspan="2"><input type="submit" name="msgForwarding" value="submit">&nbsp;<i>Changes will take effect immediately.</i></td>
  </tr>    
  
</table>
</fieldset>
</form><br>


<br>
<p><form action="SettingsAck_p.html" method="post" enctype="multipart/form-data">
<fieldset><legend id="parser">Content Parser Settings</legend>
<p>With this settings you can activate or deactivate parsing of additional content-types based on their MIME-types.<br>
For a detailed description of the various MIME-types take a look at <a href="http://www.iana.org/assignments/media-types/">http://www.iana.org/assignments/media-types/</a></p>
<p>
<table border="0" cellpadding="2" cellspacing="1">
<tr class="TableHeader" valign="bottom">
<td class="small" >Activate</td>
<td class="small" >Mime-Type</td>
<td class="small" >Parser&nbsp;Class&nbsp;Name</td>
<td class="small" ></td>
</tr>
#{parser}#
<tr class="TableCellDark">
	<td class="small" align="center"><input type="checkbox" name="#[mime]#" align="top" #(status)#::checked#(/status)#></td>
	<td class="small" >#[mime]#</td>
	<td class="small" title="Full qualified name: #[name]#">#[shortname]#</td>
	<td class="small" width="100%"></td>
	</tr>
#{/parser}#
  <tr class="TableCellLight">
    <td class="small" align="center"><input type="checkbox" name="allParserEnabled" align="top" #(allParserEnabled)#::checked#(/allParserEnabled)#>
    <td colspan="2" class="small" >Enable all parsers</td>
    <td class="small">&nbsp;</td>
  </tr>
  <tr class="TableCellLight">
    <td colspan="4" class="small" ><input type="submit" name="parserSettings" value="submit">&nbsp;Changes take effect immediately</td>
  </tr>
</table>
</fieldset>
</form><br>

#[footer]#
</body>
</html>

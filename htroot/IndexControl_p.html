<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>YaCy '#[clientname]#': Index Control</title>
    #%env/templates/metas.template%#
  </head>
  <body id="IndexControl">
    #%env/templates/header.template%#
    #%env/templates/submenuIndexControl.template%#
    <h2>Index Administration</h2>
    
    <form action="IndexControl_p.html" method="post" enctype="multipart/form-data">
      <p>The local index currently consists of (at least) #[wcount]# reverse word indexes and #[ucount]# URL references</p>
    
      <table cellpadding="5" cellspacing="0">
        <colgroup>
          <col width="70" />
          <col />
          <col width="250" />
        </colgroup>
        <tr valign="top" class="TableCellDark">
          <td>Word:</td>
          <td><input type="text" name="keystring" value="#[keystring]#" size="40" maxlength="80" /></td>
          <td><input type="submit" name="keystringsearch" value="Show URL Entries for Word" /></td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td>Word-Hash:</td>
          <td><input type="text" name="keyhash" value="#[keyhash]#" size="16" maxlength="12" />
            <input type="submit" name="keyhashsimilar" value="Generate List" /></td>
          <td><input type="submit" name="keyhashsearch" value="Show URL Entries for Word-Hash" />
          </td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td colspan="2"></td>
          <td><input type="submit" name="keyhashtransfer" value="Transfer to other peer" /><br />
            <select name="hostHash">
              #{hosts}#
              <option value="#[hosthash]#">#[hostname]#</option>
              #{/hosts}#
            </select><br />
            <input type="text" name="host" value="" size="21" maxlength="21" />
          </td>
        </tr>
      </table>
      
      <table border="0" cellpadding="5" cellspacing="0">
        <colgroup>
          <col width="70" />
          <col />
          <col width="250" />
        </colgroup>
        <tr valign="top" class="TableCellDark">
          <td>URL:</td>
          <td><input type="text" name="urlstring" value="#[urlstring]#" size="40" maxlength="250" /></td>
          <td><input type="submit" name="urlstringsearch" value="Show Details for URL" /></td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td>URL-Hash:</td>
          <td><input type="text" name="urlhash" value="#[urlhash]#" size="16" maxlength="12" />
            <input type="submit" name="urlhashsimilar" value="Generate List" /></td>
          <td><input type="submit" name="urlhashsearch" value="Show Details for URL-Hash" />
          </td>
        </tr>
      </table>
    </form>
    #(keyhashsimilar)#::Sequential List of Word-Hashes:<br />
    #{rows}# 
    #{cols}# 
    <a href="/IndexControl_p.html?keyhash=#[wordHash]#&amp;keyhashsearch=1" class="tt">#[wordHash]#</a>#{/cols}#<br />
    #{/rows}# 
    #(/keyhashsimilar)#
	#(urlhashsimilar)#::Sequential List of URL-Hashes:<br />
    #{rows}# 
    #{cols}#<a href="/IndexControl_p.html?urlhash=#[urlHash]#&amp;urlhashsearch=1" class="tt">#[urlHash]#</a> #{/cols}#<br />
    #{/rows}# 
    #(/urlhashsimilar)#
    #(genUrlList)#
    ::
    No URL entries related to this word hash <span class="tt">#[keyHash]#</span>.
    ::
    <p>#[count]# URL entries related to this word hash <span class="tt">#[keyHash]#</span></p>
    <form action="IndexControl_p.html" method="post" enctype="multipart/form-data">
      <p>#{urlList}# #(urlExists)#
        <input type="checkbox" id="urlhx.#[urlhxCount]#" name="urlhx.#[urlhxCount]#" checked value="#[urlhxValue]#" align="top" /><label for="urlhx.#[urlhxCount]#" class="tt">#[urlhxValue]#&nbsp;&lt;unresolved URL Hash&gt;</span><br />
        ::<input type="checkbox" id="urlhx.#[urlhxCount]#" name="urlhx.#[urlhxCount]#" #(urlhxChecked)#::checked="checked" #(/urlhxChecked)#value="#[urlhxValue]#" align="top" />
        <a href="/IndexControl_p.html?keystring=#[keyString]#&amp;keyhash=#[keyHash]#&amp;urlhash=#[urlhxValue]#&amp;urlstringsearch=&amp;urlstring=#[urlString]#" class="tt">#[urlhxValue]#</a><label for="urlhx.#[urlhxCount]#" class="tt">&nbsp;#[urlString]#, pos=#[pos]#</label><br />
      #(/urlExists)# #{/urlList}#</p>
      <input type="hidden" name="keystring" value="#[keyString]#" />
      <input type="hidden" name="keyhash" value="#[keyHash]#" />
      <input type="hidden" name="urlstring" value="" />
      <input type="hidden" name="urlhash" value="" /><br />
      <fieldset><legend>Reference Deletion</legend>
        <dl>
          <dt><input type="checkbox" id="delurl" name="delurl" value="" align="top" checked /></dt>
          <dd>
            <label for="delurl" class="small">
              delete also the referenced URL itself (reasonable and recommended, may produce unresolved references<br />
              at other word indexes but they do not harm)
            </label>
          </dt>
          <dt><input type="checkbox" id="delurlref" name="delurlref" value="" align="top" /></dt>
          <dd>
            <label for="delurlref" class="small">
              for every resolveable and deleted URL reference, delete the same reference at every other word where<br />
              the reference exists (very extensive, but prevents further unresolved references)
            </label>
          </dt>
          <dt>&nbsp;</dt>
          <dd>
            <input type="submit" value="Delete reference to selected URLs" name="keyhashdelete" /><br />
            <input type="submit" value="Delete reference to ALL URLs" name="keyhashdeleteall" /><span class="small">&nbsp;&nbsp;(= delete Word)</span>
          </dd>
          <dt>
            <select name="blacklist" size="1">#{blacklists}# 
              <option value="#[name]#">#[name]#</option>#{/blacklists}# 
            </select>
          </dt>
          <dd>
            <input type="submit" value="Add selected URLs to blacklist" name="blacklisturls" /><br />
            <input type="submit" value="Add selected domains to blacklist" name="blacklistdomains" />
          </dd>
        </dl>
      </fieldset>
    </form>
    <br />#(/genUrlList)#
    #(genUrlProfile)#
    ::No entry found for URL-hash #[urlhash]#
    ::<table>
		<tr><td class="small">URL String</td><td class="tt">#[urlNormalform]#</td></tr>
		<tr><td class="small">Hash</td><td class="tt">#[urlhash]#</td></tr>
		<tr><td class="small">Description</td><td class="tt">#[urlDescr]#</td></tr>
		<tr><td class="small">Modified-Date</td><td class="tt">#[moddate]#</td></tr>
		<tr><td class="small">Loaded-Date</td><td class="tt">#[loaddate]#</td></tr>
		<tr><td class="small">Referrer</td><td class="tt">#[referrer]#</td></tr>
		<tr><td class="small">Doctype</td><td class="tt">#[doctype]#</td></tr>
		<tr><td class="small">Language</td><td class="tt">#[language]#</td></tr>
		<tr><td class="small">Size</td><td class="tt">#[size]#</td></tr>
		<tr><td class="small">Words</td><td class="tt">#[wordCount]#</td></tr>
	</table><br />
	<form action="IndexControl_p.html" method="post" enctype="multipart/form-data">
		<input type="hidden" name="keystring" value="" />
		<input type="hidden" name="keyhash" value="" />
		<input type="hidden" name="urlstring" value="" />
		<input type="hidden" name="urlhash" value="#[urlhash]#" />
		<input type="submit" value="Delete URL" name="urlhashdelete" /><br />
		<span class="small">&nbsp;this may produce unresolved references at other word indexes but they do not harm</span><br /><br />
		<input type="submit" value="Delete URL and remove all references from words" name="urlhashdeleteall" /><br />
		<span class="small">&nbsp;delete the reference to this url at every other word where the reference exists (very extensive, but prevents unresolved references)</span><br />
	</form>
    #(/genUrlProfile)#
    #[result]#
    
    #%env/templates/footer.template%#
  </body>
</html>
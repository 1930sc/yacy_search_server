<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>YaCy '#[clientname]#': Index Control</title>
    #%env/templates/metas.template%#
  </head>
  <body id="IndexControl">
    #%env/templates/header.template%#
    #%env/templates/submenuIndexControl.template%#
    <h2>Index Administration</h2>
    
    <form action="IndexControl_p.html" method="post" enctype="multipart/form-data">
      <p>The local index currently consists of (at least) #[wcount]# reverse word indexes and #[ucount]# URL references</p>
    
      <table cellpadding="5" cellspacing="0">
        <colgroup>
          <col width="70" />
          <col />
          <col width="250" />
        </colgroup>
        <tr valign="top" class="TableCellDark">
          <td>Word:</td>
          <td><input type="text" name="keystring" value="#[keystring]#" size="40" maxlength="80" /></td>
          <td><input type="submit" name="keystringsearch" value="Show URL Entries for Word" /></td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td>Word-Hash:</td>
          <td><input type="text" name="keyhash" value="#[keyhash]#" size="16" maxlength="12" />
            <input type="submit" name="keyhashsimilar" value="Generate List" /></td>
          <td><input type="submit" name="keyhashsearch" value="Show URL Entries for Word-Hash" />
          </td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td colspan="2"></td>
          <td><input type="submit" name="keyhashtransfer" value="Transfer to other peer" />
            <select name="hostHash">
              #{hosts}#
              <option value="#[hosthash]#">#[hostname]#</option>
              #{/hosts}#
            </select>
          </td>
        </tr>
      </table>
      
      <table border="0" cellpadding="5" cellspacing="0">
        <colgroup>
          <col width="70" />
          <col />
          <col width="250" />
        </colgroup>
        <tr valign="top" class="TableCellDark">
          <td>URL:</td>
          <td><input type="text" name="urlstring" value="#[urlstring]#" size="40" maxlength="250" /></td>
          <td><input type="submit" name="urlstringsearch" value="Show Details for URL" /></td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td>URL-Hash:</td>
          <td><input type="text" name="urlhash" value="#[urlhash]#" size="16" maxlength="12" />
            <input type="submit" name="urlhashsimilar" value="Generate List" /></td>
          <td><input type="submit" name="urlhashsearch" value="Show Details for URL-Hash" />
          </td>
        </tr>
      </table>
      
      
      <p>
        <strong>DHT Transmission control:</strong><br />
        The transmission is necessary for the functionality of global search on other peers.
        If you switch off distribution or receipt of RWIs you will be banned from global search.
      </p>
      <table border="0" cellpadding="5" cellspacing="0">
        <colgroup>
          <col width="100" />
          <col span="2"/>
        </colgroup>
        <tr valign="top" class="TableCellDark">
          <td>Index&nbsp;Distribution:</td>
          <td><input type="checkbox" name="indexDistribute" #[indexDistributeChecked]# /></td>
          <td></td>
          <td>This enables automated, DHT-ruled Index Transmission to other peers.
          </td>
        </tr>
        <tr valign="top" class="TableCellDark">
          <td></td>
          <td>&nbsp;&nbsp;</td>
          <td><input type="checkbox" name="indexDistributeWhileCrawling" #[indexDistributeWhileCrawling]# /></td>
          <td>If checked, DHT-Transmission is enabled even during crawling.</td>
        </tr>
        <tr valign="top" class="TableCellDark">
          <td>Index Receive:</td>
          <td><input type="checkbox" name="indexReceive" #[indexReceiveChecked]# /></td>
          <td></td>
          <td>Accept remote Index Transmissions. This works only if you are a senior peer.
          The DHT-rules do not work without this function.</td>
        </tr>
        <tr valign="top" class="TableCellDark">
          <td></td>
          <td>&nbsp;&nbsp;</td>
          <td><input type="checkbox" name="indexReceiveBlockBlacklist" #[indexReceiveBlockBlacklistChecked]# /></td>
          <td>If checked, your peer silently ignores transmitted URLs that match your blacklist</td>
        </tr>
        <tr valign="top" class="TableCellDark">
          <td>Peer Tags:</td>
          <td colspan="2"><input type="text" name="peertags" value="#[peertags]#" size="40" maxlength="80" /></td>
          <td>If your peer runs in 'Robinson Mode' (Distribution and Receive off), you probably run YaCy as a search engine
              for your own search portal. Please describe your search portal with some keywords (comma-separated).
              This will help to use your peer as search target even if you do not distribute your web index by
              DHT distribution.</td>
        </tr>
        <tr valign="top" class="TableCellLight">
          <td></td>
          <td><input type="submit" name="setIndexTransmission" value="set" /></td>
          <td></td>
          <td>Changes will take effect immediately</td>
        </tr>
      </table>
    </form>
    #(keyhashsimilar)#
    ::Sequential List of Word-Hashes:<br />#{rows}# #{cols}#<a href="/IndexControl_p.html?keyhash=#[wordHash]#&amp;keyhashsearch=1" class="tt">#[wordHash]#</a> #{/cols}#<br />#{/rows}#
    #(/keyhashsimilar)#
	#(urlhashsimilar)#
    ::Sequential List of URL-Hashes:<br />#{rows}# #{cols}#<a href="/IndexControl_p.html?urlhash=#[urlHash]#&amp;urlhashsearch=1" class="tt">#[urlHash]#</a> #{/cols}#<br />#{/rows}#
    #(/urlhashsimilar)#
    #(genUrlList)#
    ::
    No URL entries related to this word hash <span class="tt">#[keyHash]#</span>.
    ::
    URL entries related to this word hash <span class="tt">#[keyHash]#</span><br /><br />
    <form action="IndexControl_p.html" method="post" enctype="multipart/form-data">
    #{urlList}# #(urlExists)#
    <input type="checkbox" name="urlhx.#[urlhxCount]#" checked value="#[urlhxValue]#" align="top" /><span class="tt">#[urlhxValue]#&nbsp;&lt;unresolved URL Hash&gt;</span><br />
    ::<input type="checkbox" name="urlhx.#[urlhxCount]#" #(urlhxChecked)#::checked #(/urlhxChecked)#value="#[urlhxValue]#" align="top" />
    <a href="/IndexControl_p.html?keystring=#[keyString]#&amp;keyhash=#[keyHash]#&amp;urlhash=#[urlhxValue]#&amp;urlstringsearch=&amp;urlstring=#[urlString]#" class="tt">#[urlhxValue]#</a><span class="tt">&nbsp;#[urlString]#, pos=#[pos]#</span><br />
    #(/urlExists)# #{/urlList}#
    <input type="hidden" name="keystring" value="#[keyString]#" />
    <input type="hidden" name="keyhash" value="#[keyHash]#" />
    <input type="hidden" name="urlstring" value="" />
    <input type="hidden" name="urlhash" value="" /><br />
    <fieldset><legend>Reference Deletion</legend>
    <table border="0" cellspacing="5" cellpadding="5">
        <tr valign="top">
            <td>
                <br /><br /><input type="submit" value="Delete reference to selected URLs" name="keyhashdelete" />
                <br /><br /><input type="submit" value="Delete reference to ALL URLs" name="keyhashdeleteall" /><span class="small"><br />&nbsp;&nbsp;(= delete Word)</span>
            </td>
            <td width="150">
                <center><input type="checkbox" name="delurl" value="" align="top" checked /></center><br />
                <span class="small">delete also the referenced URL itself (reasonable and recommended, may produce unresolved references at other word indexes but they do not harm)</span>
            </td>
            <td width="150">
                <center><input type="checkbox" name="delurlref" value="" align="top" /></center><br />
                <span class="small">for every resolveable and deleted URL reference, delete the same reference at every other word where the reference exists (very extensive, but prevents further unresolved references)</span>
            </td>
        </tr>
    </table>
    </fieldset></form><br />#(/genUrlList)#
    #(genUrlProfile)#
    ::No entry found for URL-hash #[urlhash]#
    ::<table>
		<tr><td class="small">URL String</td><td class="tt">#[urlNormalform]#</td></tr>
		<tr><td class="small">Hash</td><td class="tt">#[urlhash]#</td></tr>
		<tr><td class="small">Description</td><td class="tt">#[urlDescr]#</td></tr>
		<tr><td class="small">Modified-Date</td><td class="tt">#[moddate]#</td></tr>
		<tr><td class="small">Loaded-Date</td><td class="tt">#[loaddate]#</td></tr>
		<tr><td class="small">Referrer</td><td class="tt">#[referrer]#</td></tr>
		<tr><td class="small">Doctype</td><td class="tt">#[doctype]#</td></tr>
		<tr><td class="small">Language</td><td class="tt">#[language]#</td></tr>
		<tr><td class="small">Size</td><td class="tt">#[size]#</td></tr>
		<tr><td class="small">Words</td><td class="tt">#[wordCount]#</td></tr>
	</table><br />
	<form action="IndexControl_p.html" method="post" enctype="multipart/form-data">
		<input type="hidden" name="keystring" value="" />
		<input type="hidden" name="keyhash" value="" />
		<input type="hidden" name="urlstring" value="" />
		<input type="hidden" name="urlhash" value="#[urlhash]#" />
		<input type="submit" value="Delete URL" name="urlhashdelete" /><br />
		<span class="small">&nbsp;this may produce unresolved references at other word indexes but they do not harm</span><br /><br />
		<input type="submit" value="Delete URL and remove all references from words" name="urlhashdeleteall" /><br />
		<span class="small">&nbsp;delete the reference to this url at every other word where the reference exists (very extensive, but prevents unresolved references)</span><br />
	</form>
    #(/genUrlProfile)#
    #[result]#
    
    #%env/templates/footer.template%#
  </body>
</html>